---
layout: post
title: "[번역] 웹 아키텍쳐 입문"
date:   2019-03-30 20:53 +0900
categories: ComputerScience
---
>[[번역] 웹 아키텍쳐 입문](https://blog.rhostem.com/posts/2018-07-22-web-architecture-101)을 읽고 정리한 내용입니다.



<img src="https://images.ctfassets.net/rpmifyuylbfw/6Qv56PUiQwmgYEokCWKGgW/d7d470aef20abadf6dd29c5de023e529/main.png" />



## 1. DNS
DNS는 Domain Name Server의 약자이다. 월드 와이드 웹(www)이 가능하도록 만드는 기반 기술이다. DNS는 도메인 이름(예. google.com)에서 IP주소(예. 85.129.83.120)로의 키/값 조회를 제공한다.

DNS는 컴퓨터가 알맞은 서버에 요청을 보낼 수 있는 경로를 찾기위해 필요하다.

전화번호부에 비유하면,
"A에게 전화하기"는 도메인 이름이며 실제 전화번호(010-0000-0000)는 IP주소이다. 도메인에서 IP주소를 찾기위해서는 DNS가 필요하며, 인터넷의 전화번호부라고 생각하면 된다.


## 2. 로드밸런서

수직적 확장은 이미 사용하고 있는 장치(예. CPU, RAM)의 성능을 높이는 것이다. 서비스가 커질수록 수직적 확장으로 서비스를 감당하는 것은 힘든일이 될 것이다.

수평적 확장은 쉽게 말해 1대 이상의 서버를 가짐으로써 서비스를 제공하는 것이다. 여러 개의 서버로 서비스 오류에 대비하고, 과부하를 방지할 수 있다.

로드밸런서는 수평적확장을 가능하도록 만드는 핵심적 기술이다. 들어오는 요청을 복제/미러링 된 수많은 애플리케이션 서버 중 하나에 연결하고 서버의 응답을 다시 클라이언트로 보낸다. 모든 서버는 특정 요청을 같은 방식으로 처리하며, 로드밸런서는 서버가 과부하 되지 않도록 들어오는 요청을 적절히 분배해주는 역할을 한다.


## 3. 웹 애플리케이션 서버

웹애플리케이션 서버는 사용자의 요청이 들어오면 핵심 비즈니스 로직을 실행하고 그 결과를 HTML에 담아 브라우저로 보낸다.

이를 수행하기 위해 데이터베이스, 캐싱, 잡 큐, 검색 서비스 등 다양한 백엔드 인프라와 데이터를 주고받는다.


## 4. 데이터베이스 서버

모든 모던 웹 애플리에키션은 정보를 저장하기 위해 한 개 이상의 데이터베이스를 사용한다. 데이터베이스는 데이터 구조를 정의하고, 새로운 데이터를 추가하고, 찾아 읽어오고, 수정/삭제, 연산하는 일을 수행한다.

대부분의 웹/앱 서버는 잡 서버의 역할을 하는 데이터베이스 서버와 직접 통신한다.

SQL과 NoSQL은 데이터베이스를 이해하는 데 도움이 된다.

SQL(Structured Query Language)는 1970년대에 더 많은 사람들이 사용할 수 있또록 관계형 데이터 세트 질의(Query)의 표준으로 만들어진 것이다. SQL 데이터베이스는 공통 ID(보통 숫자 사용)로 연결된 테이블에 데이터를 저장한다.


NoSQL은 "Non-SQL"의 약자로, 대규모 웹 애플리케이션에 의해 생성되는 많은 양의 데이터를 처리하기 위해 등장한 최신 데이터베이스 기술의 집합이다.
(SQL에서 파생된 기술 대부분은 수평적 확장이 어렵고, 특정 지점에 도달하면 수직적 확장만이 가능하다.)

아래의 안내서에서 NoSQL을 공부할 수 있다.

- https://www.w3resource.com/mongodb/nosql.php
- http://www.kdnuggets.com/2016/07/seven-steps-understanding-nosql-databases.html
- https://resources.mongodb.com/getting-started-with-mongodb/back-to-basics-1-introduction-to-nosql


## 5. 캐싱서비스

캐싱 서비스는 정보를 짧은 시 내에 찾을 수 있는 단순한 키/값 데이터 저장소를 제공한다. 애플리케이션은 캐싱 서비스를 통해 자원이 많이 소모되는 연산의 결과를 다시 계산하지 않고 캐시에서 가져옴으로써 효율을 높인다. 애플리케이션은 데이터베이스의 쿼리 결과, 외부 서비스 호출 결과, 주어진 URL의 HTML 등을 캐시에 저장한다. 다음은 실무에서 사용되는 몇몇 예제다.

구글은 일반적인 검색어인 ‘dog’나 ‘Taylor Swift’를 사용한 검색을 매번 실행하기보다는 결과를 캐시 한다.
페이스북은 당신이 로그인할 때 포스트 데이터, 친구 목록 등 많은 데이터를 캐시 한다. 페이스북의 자세한 캐시 기술은 [여기](https://medium.com/@shagun/scaling-memcache-at-facebook-1ba77d71c082)에서 읽어볼 수 있다.


## 6. 잡 큐(job queue) & 서버

대부분의 웹 애플리케이션은 사용자의 요청에 대한 응답과 직접적인 관련이 없는 작업을 백그라운드에서 비동기적으로 실행할 필요가 있다.

예를 들어 구글은, 사용자가 검색할 때마다 데이터를 크롤링하는 것이 아니라 비동기적으로 데이터를 크롤링하고 인덱싱한다.

비동기 작업에 가장 널리 사용되는 것은 "잡 큐" 아키텍처다. 2개의 컴포넌트로 구성돼 있으며, "잡"으로 이루어진 큐, 그리고 큐에 들어있는 잡을 실행하는 1개 이상의 잡서버가 그것이다.

잡 큐는 비동기적으로 실행될 잡 목록을 저장한다. 서비스에 따라 우선순위를 적용한 큐 또는 FIFO(first-in-first-out)큐를 사용한다.

잡서버는 잡을 처리한다. 잡 큐에 할일이 있는지 확인하고, 있다면 잡을 처리한다.


## 7. 전체 텍스트 검색 서비스가

많은 웹 앱에서 텍스트 입력(보통 '쿼리'라고 불리는)을 하면 검색을 수행해 가장 관련있는 결과를 보여주는 기능을 제공한다.
이것을 가능하게 하는 것이 '전체 텍스트 검색'이다. 전체 텍스트 검색은 쿼리 키워드를 포함하는 문서를 빠르게 찾기 위해 역 인덱스(inverted index)를 활용한다.

<img src="https://images.ctfassets.net/rpmifyuylbfw/5gJakNIGvuS42easQcMeGi/e40692a0b6a26aa9a794b9df34c5afac/02.png?w=561">
<small>~의, ~에서 등과 조사는 역 인덱스에 포함되지 않는다.</small>

MySQL과 같은 데이터베이스에서는 전체 텍스트검색을 지원하지만, 보통 역 인덱스를 연산하고 쿼리 인터페이스를 제공하는 "검색 서비스"를 분리해서 운영하는 사례가 많다.

가장 인기 있는 전체 텍스트 검색 플랫폼은 Elasticsearch이며 sphinx, Apache Solr도 있다.


## 8. 서비스

앱이 특정 규모에 도달하면 별도의 애플리케이션으로 분리해서 운영하기 위한 '서비스'가 생긴다. 외부에는 노출되지 않지만, 앱이 다른 서비스와 연동된다.

예를 들어,

- 계정 서비스 : 사이트의 모든 사용자 정보를 저장하고 서비스를 제공하여 일관적인 사용자 경험을 가능하게 한다.

- 컨텐츠 서비스 : 모든 비디오, 오디오, 이미지의 메타 데이터를 저장한다. 컨텐츠 다운로드 인터페이스와 다운로드 이력 등을 보여주는 기능을 제공한다.

- 결제 서비스 : 고객이 카드로 결제할 수 있는 인터페이스를 제공한다.

- HTML -> PDF 서비스 : HTML을 PDF로 변환하는 간단한 인터페이스를 제공한다.


## 9. 데이터


서비스 운영에 데이터 관리는 매우 중요하다. 최근 대부분의 앱은 특정 규모에 도달하면 데이터를 제어, 저장, 분석하기 위해 데이터 [파이프라인](https://en.wikipedia.org/wiki/Pipeline_(computing))을 사용한다. 전형적으로 3개의 주요 단계가 있다.

1. 앱은 보통 사용자와 상호작용하며 발생한 데이터를 'firehose'라 불리는 곳으로 전달한다. 그것은 데이터를 받아들이고 처리할 수 있는 스트리밍 인터페이스를 제공한다.
가공되지 않은 원시 데이터는 변형되거나(transformed) 추가 정보와 함께(augmented) 다른 firehose로 전달된다.
AWS Kinesis와 Kafka는 이러한 작업을 위한 대표적인 기술이다.

2. 원시 데이터와 최종 데이터는 모두 클라우드 스토리지에 저장된다. AWS Kinesis는 원시 데이터를 AWS의 클라우드 스토리지(S3)에 저장할 수 있도록 매우 쉽게 사용할 수 있는 ‘firehose’로 불리는 설정을 제공한다.

3. 변형/추가된 데이터는 종종 분석을 위해 데이터 웨어하우스(DW)에 로드된다. 큰 기업에서는 Oracle이나 기타 독점적인 웨어하우스 기술을 사용하고 있지만, 스타트업 업계에서는 RedShift를 많이 사용하고 있으며 점유율도 계속 오르고 있다. 만약 데이터가 충분히 축적되었다면 Hadoop같은 NoSQL MapReduce 기술이 분석을 위해 필요하게 될 것이다.


## 10. 클라우드 스토리지

AWS에 의하면 "클라우드 스토리지는 인터넷을 통해 데이터를 저장, 접근, 공유할 수 있는 단순하고 확장성 있는 방법"이다.
로컬 파일 시스템에 저장할 수 있는 거의 모든 것을 RESTful API를 사용해서 HTTP를 통해 클라우드에 저장하고 접근할 수 있다.

아마존의 S3는 현재 가장 인기있는 클라우드 스트로지이다.


## 11. CDN

CDN은 'Content Delivery Network'의 약자이다. HTML, CSS, 자바스크립트, 이미지 같은 정적인 데이터를 웹을 통해 1개의 원본(origin) 서버를 사용하는 것보다 더 빠르게 제공하기 위한 기술이다. 콘텐츠를 전세계에 수많은 엣지(edge)서버에 분산하여 동작하고, 사용자는 원본서버 대신 가장 가까운 엣지서버에 접근하여 다운로드 한다.


---

개인공부를 위해 게시한 글입니다.
더 자세한 내용은 번역글과 번역 원본을 참고하길 바랍니다.


[[원본] Web Architecture 101](https://engineering.videoblocks.com/web-architecture-101-a3224e126947)
[[번역] 웹 아키텍쳐 입문](https://blog.rhostem.com/posts/2018-07-22-web-architecture-101)
